<?xml version='1.0' encoding='utf-8'?>
<!-- No shutdown port -->
<Server port="-1">

  <!--Initialize Jasper prior to webapps are loaded. Documentation at /docs/jasper-howto.html -->
  <Listener className="org.apache.catalina.core.JasperListener" />
  <!-- Prevent memory leaks due to use of particular java/javax APIs-->
  <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" />
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />
  <Listener className="org.apache.catalina.core.ThreadLocalLeakPreventionListener" />

  <Service name="Catalina">
  
    <!-- AJP Listening on localhost -->
    <!-- We do this as it's much easier to setup Apache on port 80 than Tomcat -->
    <Connector enableLookups="false" address="127.0.0.1" port="8009" protocol="AJP/1.3"/>

    <Engine name="Catalina" defaultHost="localhost">

      <Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="false" deployOnStartup="false">
        <!-- This doesn't come from context.xml files as then it doesn't set setup correctly -->
        <Context path="" docBase="<%= @download %>" reloadable="false">
        </Context>
      </Host>
    </Engine>
  </Service>
</Server>
